(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(10),c=a.n(l),s=(a(74),a(75),a(5)),o=(a(76),a(156)),i=a(17),u=a(22),m=a.n(u),f=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(""),f=Object(s.a)(u,2),d=f[0],g=f[1],p=Object(n.useState)([]),b=Object(s.a)(p,2),E=b[0],O=b[1];Object(n.useEffect)((function(){var e=localStorage.getItem("users");e&&(e=JSON.parse(e),O(e))}),[]);return r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{className:"login-form",onSubmit:function(t){return function(t){t.preventDefault();var a=E.find((function(e){return e.email===l}));a?a.password===m()(d)?(console.log("login"),localStorage.setItem("isLoggedIn",JSON.stringify(!0)),localStorage.setItem("loggedInUser",JSON.stringify(a)),e.history.push("/")):alert("Password is not correct"):alert("Invalid email")}(t)}},r.a.createElement("h2",null,"Login"),r.a.createElement(o.a,{label:"Email",type:"email",autoComplete:"current-password",variant:"outlined",size:"small",style:{margin:"5px"},required:!0,onChange:function(e){c(e.target.value)}}),r.a.createElement(o.a,{label:"Password",type:"password",autoComplete:"current-password",variant:"outlined",size:"small",style:{margin:"5px"},required:!0,onChange:function(e){g(e.target.value)}}),r.a.createElement("input",{type:"submit"})),r.a.createElement(i.b,{to:"/register",value:"submit"},r.a.createElement("span",null,"New? Register here")))},d=a(20),g=(a(84),a(36)),p=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),u=Object(s.a)(i,2),f=u[0],p=u[1],b=Object(n.useState)(""),E=Object(s.a)(b,2),O=E[0],v=E[1],S=Object(n.useState)(""),j=Object(s.a)(S,2),N=j[0],h=j[1],w=Object(n.useState)(""),y=Object(s.a)(w,2),C=y[0],I=y[1],P=Object(n.useState)(!1),k=Object(s.a)(P,2),J=k[0],x=k[1],L=function(e){return console.log(e),l.length>0&&!!l.find((function(t){return t.email===e}))};Object(n.useEffect)((function(){var e=localStorage.getItem("users");e?(e=JSON.parse(e),c(e)):(localStorage.setItem("users",JSON.stringify([])),c([]))}),[]);return r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{className:"login-form",onSubmit:function(t){!function(t){if(t.preventDefault(),console.log(L(f)),L(f))x(!0);else if(N!==C)alert("Password mismatch",N,C),console.log(N,C);else{var a={id:Object(g.v4)(),email:f,name:O,password:m()(N)},n=Object(d.a)(l);n.push(a),localStorage.setItem("users",JSON.stringify(n)),console.log(n),e.history.push("/login")}}(t)}},r.a.createElement("h2",null,"Register"),r.a.createElement(o.a,{label:"Email",type:"email",onChange:function(e){p(e.target.value)},variant:"outlined",size:"small",style:{margin:"5px"},required:!0}),J?r.a.createElement("div",{className:"error"},"Email already exits"):null,r.a.createElement(o.a,{label:"Name",type:"text",onChange:function(e){v(e.target.value)},variant:"outlined",size:"small",style:{margin:"5px"},required:!0,inputProps:{pattern:"[A-Za-z0-9]+",title:"No special characters are allowed"}}),r.a.createElement(o.a,{label:"Password",type:"password",onChange:function(e){h(e.target.value)},variant:"outlined",size:"small",style:{margin:"5px"},required:!0,inputProps:{maxLength:20,pattern:"[A-Za-z0-9]+",title:"No special characters are allowed"}}),r.a.createElement(o.a,{label:"Confirm password",type:"password",onChange:function(e){I(e.target.value)},variant:"outlined",size:"small",style:{margin:"5px"},required:!0,inputProps:{maxLength:20,pattern:"[A-Za-z0-9]+",title:"No special characters are allowed"}}),r.a.createElement("input",{type:"submit"})))},b=a(9),E=a(64),O=(a(87),a(155)),v=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement(O.a,null))},S=function(e){var t=e.component,a=Object(E.a)(e,["component"]),l=Object(n.useState)(!1),c=Object(s.a)(l,2),o=c[0],i=c[1],u=Object(n.useState)(!0),m=Object(s.a)(u,2),f=m[0],d=m[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("isLoggedIn");e?JSON.parse(e)&&(console.log("test"),i(!0),d(!1)):d(!1)}),[]),Object(n.useEffect)((function(){console.log("---",o,f)}),[o]),f?r.a.createElement(v,null):r.a.createElement(b.b,Object.assign({},a,{render:function(e){return o?r.a.createElement(t,e):r.a.createElement(b.a,{to:"/login"})}}))},j=(a(88),a(37)),N=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("loggedInUser");e&&(e=JSON.parse(e),l({email:e.email,id:e.id,name:e.name}))}),[]),r.a.createElement("nav",null,r.a.createElement("div",{className:"logo-container"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:"/logo.png",className:"logo",alt:"logo"}))),r.a.createElement(i.b,{to:"/profile",style:{textDecoration:"none"}},r.a.createElement("div",{className:"profile"},r.a.createElement(j.a,{className:"icon"}),a&&a.email)))},h=(a(89),a(28)),w=a.n(h),y=(a(107),"uR1j3A82i48Cvvn6A4pQRWBCIhUCIvG7"),C=function(e){var t=e.selectedSection,a=e.setSelectedSection,l=e.setFilter,c=Object(n.useState)([{section:"all",display_name:"All"}]),o=Object(s.a)(c,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){w.a.get("https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=".concat(y)).then((function(e){console.log(e.data),u([].concat(Object(d.a)(i),Object(d.a)(e.data.results)))}))}),[]),r.a.createElement("ul",{className:"section-listing-container"},i.map((function(e){return r.a.createElement("li",{key:e.section,className:t===e.section?"section-link active":"section-link",onClick:function(){a(e.section),l(!1)}},e.display_name)})))},I=(a(108),a(157)),P=(a(109),a(19));function k(e){var t=e.pageNumber,a=e.active,n=e.setCurrentPage;return r.a.createElement(r.a.Fragment,null,a?r.a.createElement("div",{className:"page-item active",onClick:function(){n(t)}},t):r.a.createElement("div",{className:"page-item",onClick:function(){n(t)}},t))}function J(e){var t=e.setCurrentPage;return r.a.createElement("div",{className:"page-item",onClick:function(){t(1)}},r.a.createElement(P.b,null))}function x(e){var t=e.lastPage,a=e.setCurrentPage;return r.a.createElement("div",{className:"page-item",onClick:function(){a(t)}},r.a.createElement(P.c,null))}function L(e){var t=e.pageNumber,a=e.lastPage,n=e.setCurrentPage;return r.a.createElement("div",{className:"page-item",onClick:function(){t<a+1&&n(t+1)}},r.a.createElement(P.f,null))}function _(e){var t=e.pageNumber,a=e.setCurrentPage;return r.a.createElement("div",{className:"page-item",onClick:function(){t>1&&a(t-1)}},r.a.createElement(P.e,null))}var R=function(e){var t=e.currentPage,a=e.setCurrentPage,l=e.totalResults,c=Object(n.useState)(0),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)([]),f=Object(s.a)(m,2),d=f[0],g=f[1];return Object(n.useEffect)((function(){u(l<10&&l>0?1:Math.ceil(l/10))}),[l]),Object(n.useEffect)((function(){console.log(l,i);var e=[],n=1,c=10;i<10?(n=1,c=i):t+10>i?(c=i,n=i-10):t<10?(n=n,c=c):(n=t-4,c=t+5);for(var s=n;s<=c;s++)e.push(r.a.createElement(k,{key:s,active:s===t,pageNumber:s,setCurrentPage:a}));g(e)}),[t,i]),l?r.a.createElement("div",{className:"pagination"},r.a.createElement(J,{setCurrentPage:a}),r.a.createElement(_,{pageNumber:t,setCurrentPage:a}),d.map((function(e){return e})),r.a.createElement(L,{pageNumber:t,lastPage:i,setCurrentPage:a}),r.a.createElement(x,{lastPage:i,setCurrentPage:a})):null},D=function(e){var t=e.selectedSection,a=e.user,l=Object(n.useState)([]),c=Object(s.a)(l,2),o=c[0],i=c[1],u=Object(n.useState)(1),m=Object(s.a)(u,2),f=m[0],d=m[1],p=Object(n.useState)(0),b=Object(s.a)(p,2),E=b[0],O=b[1],S=Object(n.useState)(!0),j=Object(s.a)(S,2),N=j[0],h=j[1];Object(n.useEffect)((function(){h(!0),w.a.get("https://api.nytimes.com/svc/news/v3/content/all/".concat(t,".json?api-key=").concat(y,"&offset=").concat(10*(f-1),"&limit=10")).then((function(e){console.log(e.data),e.data.results&&(1===f&&O(e.data.num_results),i(e.data.results),h(!1))}))}),[t,f]),Object(n.useEffect)((function(){O(0),d(1)}),[t]),Object(n.useEffect)((function(){localStorage.getItem("readLater")||localStorage.setItem("readLater",JSON.stringify([]))}),[]);return r.a.createElement("div",{className:"news-article-container"},o.map((function(e,t){return r.a.createElement("div",{className:"article-wrapper",key:e.slug_name},r.a.createElement("a",{href:e.url,target:"_blank"},r.a.createElement("article",{className:"acticle"},r.a.createElement("section",null,r.a.createElement("img",{src:e.thumbnail_standard,alt:""})),r.a.createElement("section",{className:"article-section"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.abstract),r.a.createElement("div",{className:"action"},r.a.createElement("small",null,Object(I.a)(new Date(e.published_date),"dd-MM-yyyy hh:mm")))))),r.a.createElement("button",{onClick:function(){return function(e){var t=localStorage.getItem("readLater");t&&(t=JSON.parse(t),t.push({news_id:Object(g.v4)(),user_id:a.id,title:e.title,url:e.url}),localStorage.setItem("readLater",JSON.stringify(t)),alert("Saved to Read later"))}(e)}},"Read Later"),r.a.createElement("hr",null),r.a.createElement("hr",null))})),N?r.a.createElement(v,null):null,r.a.createElement(R,{currentPage:f,setCurrentPage:d,totalResults:E}))},U=function(){var e=Object(n.useState)("all"),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)({}),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(!1),f=Object(s.a)(m,2),d=f[0],g=f[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("loggedInUser");e&&(e=JSON.parse(e),u({email:e.email,id:e.id,name:e.name}))}),[]),r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:d?"sidebar open":"sidebar"},r.a.createElement(C,{selectedSection:a,setSelectedSection:l,setFilter:g})),r.a.createElement("button",{className:d?"filter filter-close":"filter",onClick:function(){return g(!d)}},d?"Close":r.a.createElement(r.a.Fragment,null,r.a.createElement(P.d,{className:"icon"})," Filter")),r.a.createElement(D,{selectedSection:a,setSelectedSection:l,user:i}))},z=(a(110),a(62)),q=a(63),A=a(38),M=a(31),F=a(61),W=a.n(F),Z=(a(120),function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(e.user.name),i=Object(s.a)(o,2),u=i[0],f=i[1],g=Object(n.useState)({prePassword:"",newPassWord:"",confirmPassword:""}),p=Object(s.a)(g,2),b=p[0],E=p[1],O=function(){e.setShowModal(!1)},v=function(e){return E(Object(M.a)(Object(M.a)({},b),{},Object(A.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){localStorage.setItem("loggedInUser",JSON.stringify(e.user))}),[e.user]),Object(n.useEffect)((function(){var e=localStorage.getItem("users");e&&(e=JSON.parse(e),c(e))}),[]),r.a.createElement("div",null,r.a.createElement(W.a,{isOpen:e.showModal,contentLabel:"onRequestClose Example",onRequestClose:O,className:"Modal",overlayClassName:"Overlay"},r.a.createElement("div",{className:"modal-action"},r.a.createElement(P.a,{onClick:function(){return O()}})),r.a.createElement("div",{className:"modal-content"},r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.setUser(Object(M.a)(Object(M.a)({},e.user),{},{name:u}));var a=Object(d.a)(l);a[l.findIndex((function(t){return t.id===e.user.id}))].name=u,localStorage.setItem("users",JSON.stringify(a)),alert("Name Changed to ".concat(u))}(t)}},r.a.createElement("h3",null,"Change Name"),r.a.createElement("input",{type:"text",value:u,className:"Name",onChange:function(e){return f(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"save"})),r.a.createElement("form",{onSubmit:function(t){return function(t){console.log(b),t.preventDefault();var a=Object(d.a)(l),n=l.findIndex((function(t){return t.id===e.user.id}));m()(b.prePassword)!==a[n].password?alert("Current password is not correct"):b.newPassWord!==b.confirmPassword?alert("Password mismatch"):(a[n].password=m()(b.newPassWord),localStorage.setItem("users",JSON.stringify(a)),alert("password changed"))}(t)}},r.a.createElement("h3",null,"Change Password"),r.a.createElement("input",{onChange:v,name:"prePassword",type:"password",placeholder:"Currenet password"}),r.a.createElement("input",{onChange:v,name:"newPassWord",type:"password",placeholder:"New password"}),r.a.createElement("input",{onChange:v,name:"confirmPassword",type:"password",placeholder:"Confirm password"}),r.a.createElement("input",{type:"submit",value:"save"})))))}),B=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],l=t[1],c=r.a.useState(!1),o=Object(s.a)(c,2),u=(o[0],o[1],Object(n.useState)(!1)),m=Object(s.a)(u,2),f=m[0],d=m[1];Object(n.useEffect)((function(){var e=localStorage.getItem("loggedInUser");e?(e=JSON.parse(e),l({email:e.email,id:e.id,name:e.name,password:e.password})):window.location.href="/"}),[]);return a?r.a.createElement("div",{className:"profile-container"},r.a.createElement(j.a,{className:"icon"}),r.a.createElement("span",null,r.a.createElement(z.a,{className:"icon"})," ",r.a.createElement("b",null,a.email)),r.a.createElement("span",null,r.a.createElement(q.a,{className:"icon"})," ",r.a.createElement("b",null,a.name)),r.a.createElement("span",null,r.a.createElement(i.b,{to:"/saved_news/".concat(a.id),style:{textDecoration:"none"}},r.a.createElement("button",null,"Read saved news"))),r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return d(!0)}},"Change Name ",r.a.createElement("br",null),"or ",r.a.createElement("br",null)," Password")),r.a.createElement("span",null,r.a.createElement("button",{className:"delete",onClick:function(){return function(e){if(window.confirm("Do you want delete this account")){var t=localStorage.getItem("users");if(t){var a=(t=JSON.parse(t)).filter((function(t){return t.id!==e}));localStorage.setItem("users",JSON.stringify(a))}localStorage.removeItem("loggedInUser"),localStorage.removeItem("isLoggedIn"),window.location.href="/"}}(a.id)}},"Delete Account")),r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return localStorage.removeItem("loggedInUser"),localStorage.removeItem("isLoggedIn"),void(window.location.href="/")}},"Logout")),r.a.createElement(Z,{showModal:f,setShowModal:d,user:a,setUser:l})):null},G=(a(121),function(e){var t=Object(n.useState)(1),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(0),i=Object(s.a)(o,2),u=i[0],m=i[1],f=Object(n.useState)(!0),d=Object(s.a)(f,2),g=d[0],p=d[1],b=Object(n.useState)([]),E=Object(s.a)(b,2),O=E[0],S=E[1];Object(n.useEffect)((function(){console.log("------",e.match.params.id);var t=localStorage.getItem("loggedInUser");if(t)if((t=JSON.parse(t)).id!==e.match.params.id)e.history.push("/");else{var a=localStorage.getItem("readLater");if(a){var n=(a=JSON.parse(a)).filter((function(t){return t.user_id===e.match.params.id}));m(n.length),S(n),p(!1)}}else e.history.push("/")}),[]);return Object(n.useEffect)((function(){console.log(O)}),[O]),O.length>0?r.a.createElement("div",{className:"saved-news-container"},O.slice(10*(l-1),10*(l-1)+10).map((function(e){return r.a.createElement("div",{className:"news"},r.a.createElement("a",{href:e.url,target:"_blanck"},r.a.createElement("h3",null,e.title)),r.a.createElement("button",{className:"delete",onClick:function(){return function(e){if(window.confirm("Do you really want to delete this news?")){console.log(e);var t=localStorage.getItem("readLater");if(t){var a=(t=JSON.parse(t)).filter((function(t){return t.news_id!==e}));localStorage.setItem("readLater",JSON.stringify(a));var n=O.filter((function(t){return t.news_id!==e}));S(n)}}}(e.news_id)}},"Delete"))})),g?r.a.createElement(v,null):null,r.a.createElement(R,{currentPage:l,setCurrentPage:c,totalResults:u})):r.a.createElement("h3",{className:"no-saved-news"},"No saved news")});var Q=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(N,null),r.a.createElement(b.d,null,r.a.createElement(S,{exact:!0,path:"/",component:U}),r.a.createElement(b.b,{exact:!0,path:"/register",component:p}),r.a.createElement(b.b,{exact:!0,path:"/login",component:f}),r.a.createElement(b.b,{exact:!0,path:"/profile",component:B}),r.a.createElement(b.b,{exact:!0,path:"/saved_news/:id",component:G}))))};c.a.render(r.a.createElement(Q,null),document.getElementById("root"))},69:function(e,t,a){e.exports=a(122)},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},84:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.0e46aa1c.chunk.js.map